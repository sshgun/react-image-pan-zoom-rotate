"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e,o){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,o)}var o=function(o){var n,r;function i(){var e;return(e=o.apply(this,arguments)||this).getInitialState=function(){var t=e.props,o=t.pandx,n=t.pandy,r=t.zoom;return{comesFromDragging:!1,dragData:{dx:o,dy:n,x:0,y:0},dragging:!1,matrixData:[r,0,0,r,o,n],mouseDown:!1}},e.state=e.getInitialState(),e.reset=function(){e.setState({matrixData:[.4,0,0,.4,0,0]}),e.props.onReset&&e.props.onReset(0,0,1)},e.onClick=function(t){e.state.comesFromDragging||e.props.onClick&&e.props.onClick(t)},e.onTouchStart=function(t){var o=t.touches[0];e.panStart(o.pageX,o.pageY,t)},e.onTouchEnd=function(){e.onMouseUp()},e.onTouchMove=function(t){e.updateMousePosition(t.touches[0].pageX,t.touches[0].pageY)},e.onMouseDown=function(t){e.panStart(t.pageX,t.pageY,t)},e.panStart=function(t,o,n){if(e.props.enablePan){var r=e.state.matrixData;e.setState({dragData:{dx:r[4],dy:r[5],x:t,y:o},mouseDown:!0}),e.panWrapper&&(e.panWrapper.style.cursor="move"),n.stopPropagation(),n.nativeEvent.stopImmediatePropagation(),n.preventDefault()}},e.onMouseUp=function(){e.panEnd()},e.panEnd=function(){e.setState({comesFromDragging:e.state.dragging,dragging:!1,mouseDown:!1}),e.panWrapper&&(e.panWrapper.style.cursor=""),e.props.onPan&&e.props.onPan(e.state.matrixData[4],e.state.matrixData[5])},e.onMouseMove=function(t){e.updateMousePosition(t.pageX,t.pageY)},e.onWheel=function(t){Math.sign(t.deltaY)<0?e.props.setZoom((e.props.zoom||0)+.1):(e.props.zoom||0)>1&&e.props.setZoom((e.props.zoom||0)-.1)},e.onMouseEnter=function(){document.addEventListener("wheel",e.preventDefault,{passive:!1})},e.onMouseLeave=function(){document.removeEventListener("wheel",e.preventDefault,!1)},e.updateMousePosition=function(t,o){if(e.state.mouseDown){var n=e.getNewMatrixData(t,o);e.setState({dragging:!0,matrixData:n}),e.panContainer&&(e.panContainer.style.transform="matrix("+e.state.matrixData.toString()+")")}},e.getNewMatrixData=function(t,o){var n=e.state,r=n.dragData,i=n.matrixData,a=r.y-o;return i[4]=r.dx-(r.x-t),i[5]=r.dy-a,i},e}r=o,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,t(n,r);var a=i.prototype;return a.UNSAFE_componentWillReceiveProps=function(e){if(this.state.matrixData[0]!==e.zoom){var t=[].concat(this.state.matrixData);t[0]=e.zoom||t[0],t[3]=e.zoom||t[3],this.setState({matrixData:t})}},a.componentWillUnmount=function(){console.log("wheel listener removed"),document.removeEventListener("wheel",this.preventDefault,!1)},a.render=function(){var t=this;return e.createElement("div",{className:"pan-container "+(this.props.className||""),onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onMouseMove:this.onMouseMove,onWheel:this.onWheel,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,style:{height:this.props.height,userSelect:"none",width:this.props.width},ref:function(e){return t.panWrapper=e}},e.createElement("div",{ref:function(e){return e?t.panContainer=e:null},style:{transform:"matrix("+this.state.matrixData.toString()+")"}},this.props.children))},a.preventDefault=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1},i}(e.PureComponent);o.defaultProps={enablePan:!0,onPan:function(){},onReset:function(){},pandx:0,pandy:0,zoom:0,rotation:0},exports.PanViewer=o,exports.default=function(t){var n=t.image,r=t.alt,i=t.ref,a=t.resetImageState,s=e.useState(0),p=s[0],c=s[1],u=e.useState(0),d=u[0],l=u[1],h=e.useState(1),g=h[0],m=h[1],v=e.useState(0),f=v[0],x=v[1],w=e.useState(!1),k=w[0],M=w[1],y=function(){c(0),l(0),m(1),x(0),M(!1)};return!0===a&&y(),e.createElement("div",null,e.createElement("div",{style:{position:"absolute",right:"10px",zIndex:2,top:10,userSelect:"none",borderRadius:2,background:"#fff",boxShadow:"0px 2px 6px rgba(53, 67, 93, 0.32)"}},e.createElement("div",{onClick:function(){m(g+.2)},style:{textAlign:"center",cursor:"pointer",height:40,width:40,borderBottom:" 1px solid #ccc"}},e.createElement("svg",{style:{height:"100%",width:"100%",padding:10,boxSizing:"border-box"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M4 12H20",stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round"}),e.createElement("path",{d:"M12 4L12 20",stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round"}))),e.createElement("div",{onClick:function(){g>=1&&m(g-.2)},style:{textAlign:"center",cursor:"pointer",height:40,width:40,borderBottom:" 1px solid #ccc"}},e.createElement("svg",{style:{height:"100%",width:"100%",padding:10,boxSizing:"border-box"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M4 12H20",stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round"}))),e.createElement("div",{onClick:function(){x(-3===f?0:f-1)},style:{textAlign:"center",cursor:"pointer",height:40,width:40,borderBottom:" 1px solid #ccc"}},e.createElement("svg",{style:{height:"100%",width:"100%",padding:10,boxSizing:"border-box"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14 15L9 20L4 15",stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.createElement("path",{d:"M20 4H13C10.7909 4 9 5.79086 9 8V20",stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),e.createElement("div",{onClick:function(){M(!k)},style:{textAlign:"center",cursor:"pointer",height:40,width:40,borderBottom:" 1px solid #ccc"}},e.createElement("svg",{style:{height:"100%",width:"100%",padding:10,boxSizing:"border-box"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M9.178,18.799V1.763L0,18.799H9.178z M8.517,18.136h-7.41l7.41-13.752V18.136z"}),e.createElement("polygon",{stroke:"#4C68C1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",points:"11.385,1.763 11.385,18.799 20.562,18.799 "}))),e.createElement("div",{onClick:y,style:{textAlign:"center",cursor:"pointer",height:40,width:40}},e.createElement("svg",{style:{height:"100%",width:"100%",padding:10,boxSizing:"border-box"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#4C68C1",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})))),e.createElement(o,{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},zoom:g,setZoom:m,pandx:p,pandy:d,onPan:function(e,t){c(e),l(t)},rotation:f,key:p},e.createElement("img",{style:{transform:"rotate("+90*f+"deg) scaleX("+(k?-1:1)+")",width:"100%"},src:n,alt:r,ref:i})))};
//# sourceMappingURL=react-image-pan-zoom-rotate.cjs.production.min.js.map
