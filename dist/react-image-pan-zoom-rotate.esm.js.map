{"version":3,"file":"react-image-pan-zoom-rotate.esm.js","sources":["../src/PanViewer.tsx","../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nexport interface IDragData {\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n}\n\nexport interface IReactPanZoomStateType {\n  dragging: boolean;\n  mouseDown: boolean;\n  comesFromDragging: boolean;\n  dragData: IDragData;\n  matrixData: number[];\n}\nexport interface IReactPanZoomProps {\n  height?: string;\n  width?: string;\n  className?: string;\n  enablePan?: boolean;\n  reset?: () => void;\n  zoom?: number;\n  pandx?: number;\n  pandy?: number;\n  rotation?: number;\n  onPan?: (x: number, y: number) => void;\n  setZoom: (z: number) => void;\n  onReset?: (dx: number, dy: number, zoom: number) => void;\n  onClick?: (e: React.MouseEvent<any>) => void;\n  style?: {};\n  children?: React.ReactNode;\n}\nexport default class ReactPanZoom extends React.PureComponent<\n  IReactPanZoomProps\n> {\n  // In strict null checking setting default props doesn't seem to work. Hence the non-null assertion.\n  // :crossedfingers: it shouldn't be deprecated. Or the very least support defaultProps semantics as proposed\n  // in this PR: https://github.com/Microsoft/TypeScript/issues/23812\n  public static defaultProps: Partial<IReactPanZoomProps> = {\n    enablePan: true,\n    onPan: () => undefined,\n    onReset: () => undefined,\n    pandx: 0,\n    pandy: 0,\n    zoom: 0,\n    rotation: 0,\n  };\n\n  private panWrapper: any;\n\n  private panContainer: any;\n  private getInitialState = (): IReactPanZoomStateType => {\n    const { pandx, pandy, zoom } = this.props;\n    const defaultDragData = {\n      dx: pandx!,\n      dy: pandy!,\n      x: 0,\n      y: 0,\n    };\n    return {\n      comesFromDragging: false,\n      dragData: defaultDragData,\n      dragging: false,\n      matrixData: [\n        zoom!,\n        0,\n        0,\n        zoom!,\n        pandx!,\n        pandy!, // [zoom, skew, skew, zoom, dx, dy]\n      ],\n      mouseDown: false,\n    };\n  };\n\n  public state = this.getInitialState();\n\n  public UNSAFE_componentWillReceiveProps(nextProps: IReactPanZoomProps) {\n    const { matrixData } = this.state;\n    if (matrixData[0] !== nextProps.zoom) {\n      const newMatrixData = [...this.state.matrixData];\n      newMatrixData[0] = nextProps.zoom || newMatrixData[0];\n      newMatrixData[3] = nextProps.zoom || newMatrixData[3];\n      this.setState({\n        matrixData: newMatrixData,\n      });\n    }\n  }\n\n  public componentWillUnmount() {\n    console.log(\"wheel listener removed\");\n    document.removeEventListener('wheel', this.preventDefault, false);\n  }\n\n  public reset = () => {\n    const matrixData = [0.4, 0, 0, 0.4, 0, 0];\n    this.setState({ matrixData });\n    if (this.props.onReset) {\n      this.props.onReset(0, 0, 1);\n    }\n  };\n\n  // tslint:disable-next-line: member-ordering\n  public onClick = (e: React.MouseEvent<EventTarget>) => {\n    if (this.state.comesFromDragging) {\n      return;\n    }\n\n    if (this.props.onClick) {\n      this.props.onClick(e);\n    }\n  };\n\n  // tslint:disable-next-line: member-ordering\n  public onTouchStart = (e: React.TouchEvent<EventTarget>) => {\n    const { pageX, pageY } = e.touches[0];\n    this.panStart(pageX, pageY, e);\n  };\n\n  // tslint:disable-next-line: member-ordering\n  public onTouchEnd = () => {\n    this.onMouseUp();\n  };\n\n  // tslint:disable-next-line: member-ordering\n  public onTouchMove = (e: React.TouchEvent<EventTarget>) => {\n    this.updateMousePosition(e.touches[0].pageX, e.touches[0].pageY);\n  };\n\n  // tslint:disable-next-line: member-ordering\n  public render() {\n    return (\n      <div\n        className={`pan-container ${this.props.className || ''}`}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        onTouchMove={this.onTouchMove}\n        onTouchEnd={this.onTouchEnd}\n        onMouseMove={this.onMouseMove}\n        onWheel={this.onWheel}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onClick}\n        style={{\n          height: this.props.height,\n          userSelect: 'none',\n          width: this.props.width,\n        }}\n        ref={(ref) => (this.panWrapper = ref)}\n      >\n        <div\n          ref={(ref) => (ref ? (this.panContainer = ref) : null)}\n          style={{\n            transform: `matrix(${this.state.matrixData.toString()})`,\n          }}\n        >\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n\n  private onMouseDown = (e: React.MouseEvent<EventTarget>) => {\n    this.panStart(e.pageX, e.pageY, e);\n  };\n\n  private panStart = (\n    pageX: number,\n    pageY: number,\n    event: React.MouseEvent<EventTarget> | React.TouchEvent<EventTarget>\n  ) => {\n    if (!this.props.enablePan) {\n      return;\n    }\n\n    const { matrixData } = this.state;\n    const offsetX = matrixData[4];\n    const offsetY = matrixData[5];\n    const newDragData: IDragData = {\n      dx: offsetX,\n      dy: offsetY,\n      x: pageX,\n      y: pageY,\n    };\n    this.setState({\n      dragData: newDragData,\n      mouseDown: true,\n    });\n    if (this.panWrapper) {\n      this.panWrapper.style.cursor = 'move';\n    }\n    event.stopPropagation();\n    event.nativeEvent.stopImmediatePropagation();\n    event.preventDefault();\n  };\n\n  private onMouseUp = () => {\n    this.panEnd();\n  };\n\n  private panEnd = () => {\n    this.setState({\n      comesFromDragging: this.state.dragging,\n      dragging: false,\n      mouseDown: false,\n    });\n    if (this.panWrapper) {\n      this.panWrapper.style.cursor = '';\n    }\n    if (this.props.onPan) {\n      this.props.onPan(this.state.matrixData[4], this.state.matrixData[5]);\n    }\n  };\n\n  public preventDefault(e: any) {\n    e = e || window.event;\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    e.returnValue = false;\n  }\n\n  private onMouseMove = (e: React.MouseEvent<EventTarget>) => {\n    this.updateMousePosition(e.pageX, e.pageY);\n  };\n\n  private onWheel = (e: React.WheelEvent<EventTarget>) => {\n    Math.sign(e.deltaY) < 0\n      ? this.props.setZoom((this.props.zoom || 0) + 0.1)\n      : (this.props.zoom || 0) > 1 &&\n        this.props.setZoom((this.props.zoom || 0) - 0.1);\n  };\n\n  private onMouseEnter = () => {\n    document.addEventListener('wheel', this.preventDefault, {\n      passive: false,\n    });\n  };\n\n  private onMouseLeave = () => {\n    document.removeEventListener('wheel', this.preventDefault, false);\n  };\n\n  private updateMousePosition = (pageX: number, pageY: number) => {\n    if (!this.state.mouseDown) return;\n\n    const matrixData = this.getNewMatrixData(pageX, pageY);\n    this.setState({\n      dragging: true,\n      matrixData,\n    });\n    if (this.panContainer) {\n      this.panContainer.style.transform = `matrix(${this.state.matrixData.toString()})`;\n    }\n  };\n\n  private getNewMatrixData = (x: number, y: number): number[] => {\n    const { dragData, matrixData } = this.state;\n    const deltaX = dragData.x - x;\n    const deltaY = dragData.y - y;\n    matrixData[4] = dragData.dx - deltaX;\n    matrixData[5] = dragData.dy - deltaY;\n    return matrixData;\n  };\n}\n","import * as React from 'react';\nimport PanViewer from './PanViewer';\n\n// box-shadow: 0px 0px 5px 1px #0c0c0c;\n\ntype ReactPanZoomProps = {\n  image: string;\n  alt?: string;\n  ref?: any;\n  resetImageState?: boolean;\n};\n\nconst ReactPanZoom = ({ image, alt, ref, resetImageState }: ReactPanZoomProps) => {\n  const [dx, setDx] = React.useState(0);\n  const [dy, setDy] = React.useState(0);\n  const [zoom, setZoom] = React.useState(1);\n  const [rotation, setRotation] = React.useState(0);\n  const [flip, setFlip] = React.useState(false);\n\n  const resetAll = () => {\n    setDx(0);\n    setDy(0);\n    setZoom(1);\n    setRotation(0);\n    setFlip(false);\n  };\n\n  if (resetImageState === true) {\n    resetAll()\n  }\n  \n  const zoomIn = () => {\n    setZoom(zoom + 0.2);\n  };\n\n  const zoomOut = () => {\n    if (zoom >= 1) {\n      setZoom(zoom - 0.2);\n    }\n  };\n\n  const rotateLeft = () => {\n    if (rotation === -3) {\n      setRotation(0);\n    } else {\n      setRotation(rotation - 1);\n    }\n  };\n\n  const flipImage = () => {\n    setFlip(!flip);\n  };\n\n  const onPan = (dx: number, dy: number) => {\n    setDx(dx);\n    setDy(dy);\n  };\n\n  return (\n    <div>\n      <div\n        style={{\n          position: 'absolute',\n          right: '10px',\n          zIndex: 2,\n          top: 10,\n          userSelect: 'none',\n          borderRadius: 2,\n          background: '#fff',\n          boxShadow: '0px 2px 6px rgba(53, 67, 93, 0.32)',\n        }}\n      >\n        <div\n          onClick={zoomIn}\n          style={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            height: 40,\n            width: 40,\n            borderBottom: ' 1px solid #ccc',\n          }}\n        >\n          <svg\n            style={{\n              height: '100%',\n              width: '100%',\n              padding: 10,\n              boxSizing: 'border-box',\n            }}\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M4 12H20\"\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n            <path\n              d=\"M12 4L12 20\"\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n          </svg>\n        </div>\n        <div\n          onClick={zoomOut}\n          style={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            height: 40,\n            width: 40,\n            borderBottom: ' 1px solid #ccc',\n          }}\n        >\n          <svg\n            style={{\n              height: '100%',\n              width: '100%',\n              padding: 10,\n              boxSizing: 'border-box',\n            }}\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M4 12H20\"\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n          </svg>\n        </div>\n        <div\n          onClick={rotateLeft}\n          style={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            height: 40,\n            width: 40,\n            borderBottom: ' 1px solid #ccc',\n          }}\n        >\n          <svg\n            style={{\n              height: '100%',\n              width: '100%',\n              padding: 10,\n              boxSizing: 'border-box',\n            }}\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M14 15L9 20L4 15\"\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M20 4H13C10.7909 4 9 5.79086 9 8V20\"\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n        </div>\n        <div\n          onClick={flipImage}\n          style={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            height: 40,\n            width: 40,\n            borderBottom: ' 1px solid #ccc',\n          }}\n        >\n          <svg\n            style={{\n              height: '100%',\n              width: '100%',\n              padding: 10,\n              boxSizing: 'border-box',\n            }}\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M9.178,18.799V1.763L0,18.799H9.178z M8.517,18.136h-7.41l7.41-13.752V18.136z\"\n            />\n            <polygon\n              stroke=\"#4C68C1\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              points=\"11.385,1.763 11.385,18.799 20.562,18.799 \"\n            />\n          </svg>\n        </div>\n        <div\n          onClick={resetAll}\n          style={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            height: 40,\n            width: 40,\n          }}\n        >\n          <svg\n            style={{\n              height: '100%',\n              width: '100%',\n              padding: 10,\n              boxSizing: 'border-box',\n            }}\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            stroke=\"#4C68C1\"\n            strokeWidth={2}\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <path d=\"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7\" />\n          </svg>\n        </div>\n      </div>\n      <PanViewer\n        style={{\n          width: '100%',\n          height: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 1,\n        }}\n        zoom={zoom}\n        setZoom={setZoom}\n        pandx={dx}\n        pandy={dy}\n        onPan={onPan}\n        rotation={rotation}\n        key={dx}\n      >\n        <img\n          style={{\n            transform: `rotate(${rotation * 90}deg) scaleX(${flip ? -1 : 1})`,\n            width: '100%',\n          }}\n          src={image}\n          alt={alt}\n          ref={ref}\n        />\n      </PanViewer>\n    </div>\n  );\n};\n\nexport { PanViewer };\nexport default ReactPanZoom;\n"],"names":["ReactPanZoom","props","pandx","pandy","zoom","defaultDragData","dx","dy","x","y","comesFromDragging","dragData","dragging","matrixData","mouseDown","getInitialState","setState","onReset","e","state","onClick","touches","pageX","pageY","panStart","onMouseUp","updateMousePosition","event","enablePan","offsetX","offsetY","newDragData","panWrapper","style","cursor","stopPropagation","nativeEvent","stopImmediatePropagation","preventDefault","panEnd","onPan","Math","sign","deltaY","setZoom","document","addEventListener","passive","removeEventListener","getNewMatrixData","panContainer","transform","toString","deltaX","UNSAFE_componentWillReceiveProps","nextProps","newMatrixData","componentWillUnmount","console","log","render","React","className","onMouseDown","onTouchStart","onTouchMove","onTouchEnd","onMouseMove","onWheel","onMouseEnter","onMouseLeave","height","userSelect","width","ref","children","window","returnValue","undefined","rotation","image","alt","resetImageState","setDx","setDy","setRotation","flip","setFlip","resetAll","zoomIn","zoomOut","rotateLeft","flipImage","position","right","zIndex","top","borderRadius","background","boxShadow","textAlign","borderBottom","padding","boxSizing","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","PanViewer","display","justifyContent","alignItems","key","src"],"mappings":"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"}